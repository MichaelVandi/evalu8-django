{% extends 'index_base.html' %}

{% block content %}
<!-- Div for headline-->
<div class="headline-div container-fluid" style="background-image: linear-gradient(
    rgba(0, 0, 0, 0.5),
    rgba(0, 0, 0, 0.5)
  ), url({{coverPhotos|random}}); margin-top: 90px; margin-bottom: 30px;">
    <div class="headline-container">
        <h1 class="headline-text">{{headline|random}}</h1>
    </div>
    {% if user.is_authenticated %}

    {% else %}
        <div class="headline-btn-div text-center">
            <a href="{% url 'login' %}"><button id="action-btn">Get Started</button></a>
        </div>
    {% endif %}
    
</div>

    <div class="container-fluid text-center">
        <div class="d-inline-flex text-center">
            <div class="bus-list-div">
            {% for result in results%}
            <a class="menu-link" href="{% url 'business' result.business_id%}">
                <div class="bus-div">
                    <!-- Business Image goes here-->
                    <div class="bus-thumbnail" style="background-image: url( {{photos|random}} );">
                        <p style="display: none" class="businessQuery">{{result.business_name}}, {{result.business_address}}</p>
                    </div>
                    <!-- Other Business info goes here-->
                    <div class="bus-info-div">
                        
                        <p class="bus-text text-city" style="margin: 0; padding: 0;">{{result.business_city}}</p>
                        <p class="bus-text text-name">{{result.business_name}}</p>
                        <p class="bus-text text-address">{{result.business_address}}</p>
                        {% if result.inspection_score == none %}
                            <p class="bus-text text-score"><i class="fas bus-icon fa-check-square" style="color: #D28827"></i>No score</p>
                        {% else %}
                            <p class="bus-text text-score"><i class="fas bus-icon fa-check-square" style="color: #D28827"></i>{{result.inspection_score}}%</p>                            
                        {% endif %}
                        
                    </div>
                    
                </div>
            </a>
            
            {% empty %}
                <!-- Result empty load alternative -->
            {% endfor %}
            </div>
        </div>    
    </div>
    <script type="text/javascript">
        // When page content loads
        document.addEventListener('DOMContentLoaded', ()=>{
            // Change navigation to current
            $("#restaurants").css("border-bottom", "1px solid #D28827");

        })
        if("{{toppicks}}" != ""){
            $("#restaurants").css("border-bottom", "none");
            $("#topPicks").css("border-bottom", "1px solid #D28827");
        }

    </script>

{% endblock %}